clc; clearvars; close all;

% -------------------------------------------------------------------------
% Create an empty array.
% -------------------------------------------------------------------------
arr = array.create();

% -------------------------------------------------------------------------
% Place elements randomly.
% -------------------------------------------------------------------------
var = 1;
num_elements = 16;
for idx = 1:num_elements
    x = gauss_rv(0,var);
    y = gauss_rv(0,var) * 1;
    z = gauss_rv(0,var);
    arr.add_element(x,y,z);
end

% -------------------------------------------------------------------------
% View array.
% -------------------------------------------------------------------------
arr.show_3d();

% -------------------------------------------------------------------------
% Get array response.
% -------------------------------------------------------------------------
az_deg = 15;
el_deg = 0;
az = az_deg * pi / 180;
el = el_deg * pi / 180;
a = arr.get_array_response(az,el)

% -------------------------------------------------------------------------
% Beamforming.
% -------------------------------------------------------------------------
w = conj(a);
arr.set_weights(w);

% -------------------------------------------------------------------------
% Show array pattern.
% -------------------------------------------------------------------------
arr.show_polar_array_pattern_azimuth();

